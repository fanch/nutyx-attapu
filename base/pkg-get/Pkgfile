# Description: Outil de gestion de paquets binaires pour NuTyX
# URL: http://www.varlock.com
# Maintainer: Simone Rota, sip at crux dot nu
# Packager: Simone Rota, sip at crux dot nu
# Depends on:

name=pkg-get
version=0.4.5
release=11
source=(http://www.varlock.com/files/$name-$version.tar.gz \
	pkg-get-0.4.5-NuTyX-02.patch pkg-get.conf pkg-repgen.patch syn)

build() {
ARCH_=`uname -m`
	cd $name-$version
	patch -Np1 -i ../pkg-repgen.patch
	patch -Np1 -i ../pkg-get-$version-NuTyX-02.patch
	make PREFIX=$PKG/usr CFGDIR=$PKG/etc install
	mkdir -p $PKG/usr/share
	mv $PKG/usr/{man,share/man}
	install -m 755 ../syn $PKG/usr/bin/syn
	sed -i "s|CRUX Packages|Paquets NuTyX Architecture $ARCH_|g" $PKG/usr/bin/pkg-repgen
	sed -i "s|Generated by|Généré par|g" $PKG/usr/bin/pkg-repgen
	sed -i "s|Port|Nom|" $PKG/usr/bin/pkg-repgen
	sed -i "s|Last modified|Dernière compilation|" $PKG/usr/bin/pkg-repgen
	sed -i "s| package| paquet|g" $PKG/usr/bin/pkg-repgen
	sed -i "s| on | le |" $PKG/usr/bin/pkg-repgen
install -m644 ../pkg-get.conf $PKG/etc/pkg-get.conf
sed -i "s/uname-m/$ARCH_/" $PKG/etc/pkg-get.conf
sed -i "s/uname-m/$ARCH_/" $PKG/usr/bin/syn
}

